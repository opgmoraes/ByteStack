<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ByteStack Flow</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=JetBrains+Mono:wght@200;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <canvas id="audioVisualizer"></canvas>
    <div class="grid-bg"></div>
    <div class="vignette"></div>

    <div class="app-layout">
        
        <main class="region-focus">
            <header class="top-nav">
                <div class="brand-area">
                    <div class="brand"><span class="brand-icon">‚ö°</span> BYTESTACK <span style="opacity:0.5; font-weight:400; margin-left:5px">FLOW</span></div>
                </div>

                <div class="nav-controls">
                    <button class="nav-btn" onclick="toggleTheme()" title="Mudar Tema [T]">üé®</button>
                    <button class="nav-btn" onclick="cycleAudio()" id="audioBtn" title="Gerador de Ru√≠do [S]">üîá</button>
                    <button class="nav-btn" onclick="togglePiP()" id="pipBtn" title="Mini Player [P]">‚èç</button>
                    <button class="nav-btn" onclick="toggleSettings()" title="Configura√ß√µes">‚öô</button>
                </div>
            </header>

            <div class="timer-container">
                <div class="status-pill" id="statusText">RUMO AO FOCO</div>
                
                <div class="timer-wrapper">
                    <svg class="progress-ring" width="300" height="300">
                        <circle class="progress-ring__circle-bg" stroke="rgba(255,255,255,0.05)" stroke-width="8" fill="transparent" r="140" cx="150" cy="150"/>
                        <circle class="progress-ring__circle" id="progressCircle" stroke="#00d28d" stroke-width="8" fill="transparent" r="140" cx="150" cy="150"/>
                    </svg>
                    <h1 id="timerDisplay">25:00</h1>
                </div>

                <div class="controls-wrapper">
                    <button class="btn-secondary" onclick="resetTimer()" title="Reset [R]">‚Ü∫</button>
                    <button class="btn-primary" id="playBtn" onclick="toggleTimer()" title="Play [Espa√ßo]">INICIAR</button>
                    <button class="btn-secondary" onclick="skipPhase()" title="Pular"> ‚Üí </button>
                </div>

                <div class="cycle-tracker">
                    <div class="cycle-line"></div>
                    <div class="cycle-step active" id="step1">1</div>
                    <div class="cycle-step" id="step2">2</div>
                    <div class="cycle-step" id="step3">3</div>
                    <div class="cycle-step" id="step4">4</div>
                </div>
            </div>

            <div class="hotkeys-hint">
                [Espa√ßo] Play ‚Ä¢ [P] PiP ‚Ä¢ [S] Sons ‚Ä¢ [T] Tema ‚Ä¢ [N] Task
            </div>

            <button class="mobile-task-toggle" onclick="toggleMobileSidebar()">
                üìù Tarefas (<span id="mobileTaskCount">0</span>)
            </button>
        </main>

        <aside class="region-sidebar" id="sidebar">
            <div class="mobile-drag-handle" onclick="toggleMobileSidebar()"></div>
            <div class="sidebar-header">
                <h2>Backlog</h2>
                <button class="close-sidebar-mobile" onclick="toggleMobileSidebar()">‚úï</button>
            </div>
            <div class="input-group">
                <input type="text" id="taskInput" placeholder="Nova tarefa... [N]" autocomplete="off">
                <input type="number" id="taskEst" min="1" max="5" value="1" title="Estimativa">
                <button onclick="addTask()">Ôºã</button>
            </div>
            <div class="task-scroll-area">
                <ul class="task-list" id="taskList"></ul>
            </div>
            <div class="sidebar-footer">
                <small>Foco Total: <span id="sessionMinutes">0</span> min</small>
            </div>
        </aside>
    </div>

    <div id="toast" class="toast-container"><span class="toast-icon">‚ö°</span> <span id="toastMsg">Info</span></div>

    <div class="modal-overlay" id="settingsModal">
        <div class="modal-box">
            <h3>Configura√ß√µes</h3>
            <div class="setting-section-title">‚è±Ô∏è Tempos (minutos)</div>
            <div class="input-row-group">
                <div class="input-col"><label>Foco</label><input type="number" id="inputFocus" value="25"></div>
                <div class="input-col"><label>Curta</label><input type="number" id="inputShort" value="5"></div>
                <div class="input-col"><label>Longa</label><input type="number" id="inputLong" value="15"></div>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel" onclick="toggleSettings()">Cancelar</button>
                <button class="btn-confirm" onclick="saveSettings()">Salvar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
